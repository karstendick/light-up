{"version":3,"file":"static/js/main.a5137405.js","mappings":"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","sources":["GameBoard.tsx","App.tsx","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import { useImmer } from \"use-immer\";\nimport { Draft } from \"immer\";\nimport  { Text } from \"react-native\";\nimport \"./styles.css\";\n\n// TODO: Handled different sized puzzles\nconst nrows = 7;\nconst ncols = 7;\n\nfunction itorc(i: number): [number, number] {\n  return [Math.floor(i / ncols), i % ncols];\n}\n\nfunction rctoi(r: number, c: number): number {\n  return r * ncols + c;\n}\n\nenum CellState {\n  Empty, // 0\n  Shaded, // 1\n  Shaded0, // 2\n  Shaded1, // 3\n  Shaded2, // 4\n  Shaded3, // 5\n  Shaded4, // 6\n  Xed, // 7\n  Lightbulb, // 8\n  Lit, // 9\n  LitXed, // 10\n}\n\nconst cellStateToContent = {\n  [CellState.Empty]: \"‚¨úÔ∏è\",\n  [CellState.Shaded]: \"‚¨õ\",\n  [CellState.Shaded0]: \"0Ô∏è‚É£\",\n  [CellState.Shaded1]: \"1Ô∏è‚É£\",\n  [CellState.Shaded2]: \"2Ô∏è‚É£\",\n  [CellState.Shaded3]: \"3Ô∏è‚É£\",\n  [CellState.Shaded4]: \"4Ô∏è‚É£\",\n  [CellState.Xed]: \"‚ùå\",\n  [CellState.Lightbulb]: \"üí°\",\n  [CellState.Lit]: \"üü®\",\n  [CellState.LitXed]: \"‚ùé\",\n}\n\nconst charToCellState: Record<string, CellState> = {\n  \".\": CellState.Empty,\n  \"=\": CellState.Shaded,\n  \"0\": CellState.Shaded0,\n  \"1\": CellState.Shaded1,\n  \"2\": CellState.Shaded2,\n  \"3\": CellState.Shaded3,\n  \"4\": CellState.Shaded4,\n}\n\ntype Cell = {\n  id: number\n  state: CellState;\n  isError?: boolean;\n}\n\nconst puzzle1 = `\n....10.\n1......\n0.=.=..\n...=...\n..0.3.=\n......=\n.0=....`\n\nfunction parsePuzzle(puzzle: string): Cell[] {\n  const lines = puzzle.trim().split(\"\\n\")\n  const cells = []\n  for (let y = 0; y < lines.length; y++) {\n    const line = lines[y]\n    for (let x = 0; x < line.length; x++) {\n      const char = line[x]\n      const state = charToCellState[char]\n      cells.push({ id: x + y * line.length, state })\n    }\n  }\n  return cells\n}\n\nconst transparentStates = [ CellState.Empty, CellState.Xed, CellState.Lit, CellState.LitXed ]\nfunction shineLight(cells: Cell[], lightbulbCell: Cell): Cell[] {\n  const [r, c] = itorc(lightbulbCell.id)\n  const litCells = []\n  // go up\n  for (let i = r - 1; i >= 0; i--) {\n    const cell = cells[rctoi(i, c)]\n    if (transparentStates.includes(cell.state)) {\n      litCells.push(cell)\n    } else {\n      break\n    }\n  }\n  // go down\n  for (let i = r + 1; i < nrows; i++) {\n    const cell = cells[rctoi(i, c)]\n    if (transparentStates.includes(cell.state)) {\n      litCells.push(cell)\n    } else {\n      break\n    }\n  }\n  // go left\n  for (let i = c - 1; i >= 0; i--) {\n    const cell = cells[rctoi(r, i)]\n    if (transparentStates.includes(cell.state)) {\n      litCells.push(cell)\n    } else {\n      break\n    }\n  }\n  // go right\n  for (let i = c + 1; i < ncols; i++) {\n    const cell = cells[rctoi(r, i)]\n    if (transparentStates.includes(cell.state)) {\n      litCells.push(cell)\n    } else {\n      break\n    }\n  }\n  return litCells\n}\n\nfunction getAdjacentCells(cells: Cell[], cell: Cell): Cell[] {\n  const [r, c] = itorc(cell.id)\n  const adjacentCells = []\n  // go up\n  if (r > 0) {\n    adjacentCells.push(cells[rctoi(r - 1, c)])\n  }\n  // go down\n  if (r < nrows - 1) {\n    adjacentCells.push(cells[rctoi(r + 1, c)])\n  }\n  // go left\n  if (c > 0) {\n    adjacentCells.push(cells[rctoi(r, c - 1)])\n  }\n  // go right\n  if (c < ncols - 1) {\n    adjacentCells.push(cells[rctoi(r, c + 1)])\n  }\n  return adjacentCells\n}\n\n// Returns the difference between the number of adjacent lightbulbs and the number of required adjacent lightbulbs\n// 0 means the correct number of lightbulbs are adjacent\n// >0 means there are too many lightbulbs adjacent, which is an error\n// <0 means there are too few lightbulbs adjacent, so continue playing\nfunction getNumAdjacentLightbulbsDiff(cells: Cell[], cell: Cell): number {\n  const adjacentCells = getAdjacentCells(cells, cell)\n  const numAdjacentLightbulbs = adjacentCells.filter(cell => cell.state === CellState.Lightbulb).length\n  // A little hacky, but this'll work so long as we keep the shaded number states in order\n  const numRequiredAdjacentLightbulbs = cell.state - CellState.Shaded0\n  return numAdjacentLightbulbs - numRequiredAdjacentLightbulbs\n}\n\nfunction cellIsError(cells: Cell[], cell: Cell): boolean {\n  if (![CellState.Shaded0, CellState.Shaded1, CellState.Shaded2, CellState.Shaded3, CellState.Shaded4].includes(cell.state)) {\n    return false\n  }\n  const numAdjacentLightbulbsDiff = getNumAdjacentLightbulbsDiff(cells, cell)\n  return numAdjacentLightbulbsDiff > 0\n}\n\nfunction checkIsGameWon(cells: Cell[]): boolean {\n  // Check that all cells are lit\n  const disallowedStates = [CellState.Empty, CellState.Xed]\n  const cellsWithDisallowedStates = cells.filter(cell => disallowedStates.includes(cell.state))\n  if (cellsWithDisallowedStates.length > 0) {\n    return false\n  }\n  // Check that all numbered cells have exactly that many lightbulbs adjacent to it\n  const numberedCells = cells.filter(cell => [CellState.Shaded0, CellState.Shaded1, CellState.Shaded2, CellState.Shaded3, CellState.Shaded4].includes(cell.state))\n  const numAdjacentLightbulbsDiffs = numberedCells.map(cell => getNumAdjacentLightbulbsDiff(cells, cell))\n  if (numAdjacentLightbulbsDiffs.some(diff => diff !== 0)) {\n    return false\n  }\n\n  return true\n}\n\n\n\nexport default function GameBoard() {\n  const [cells, setCells] = useImmer(parsePuzzle(puzzle1))\n  const [isGameWon, setIsGameWon] = useImmer(false)\n\n  function cellIsClickable(cell: Cell): boolean {\n    if (isGameWon) {\n      return false\n    } else if ([CellState.Shaded, CellState.Shaded0, CellState.Shaded1, CellState.Shaded2, CellState.Shaded3, CellState.Shaded4].includes(cell.state)) {\n      return false\n    } else {\n      return true\n    }\n  }\n\n  const handleClick = (clickedCell: Cell) => {\n    setCells((draftCells: Draft<Cell[]>) => {\n      let newState = clickedCell.state\n      switch (clickedCell.state) {\n        case CellState.Shaded:\n        case CellState.Shaded0:\n        case CellState.Shaded1:\n        case CellState.Shaded2:\n        case CellState.Shaded3:\n        case CellState.Shaded4:\n          return\n        case CellState.Lit:\n          newState = CellState.LitXed\n          break\n        case CellState.Empty:\n          newState = CellState.Lightbulb\n          break\n        case CellState.Lightbulb:\n            newState = CellState.Xed\n            break\n        case CellState.Xed:\n        case CellState.LitXed:\n          newState = CellState.Empty\n          break\n      }\n      draftCells[clickedCell.id].state = newState\n\n      // Unlight all previously lit cells, since we may have just removed a lightbulb\n      const prevLitCells = draftCells.filter(cell => cell.state === CellState.Lit)\n      prevLitCells.forEach(cell => draftCells[cell.id].state = CellState.Empty)\n      const prevLitXedCells = draftCells.filter(cell => cell.state === CellState.LitXed)\n      prevLitXedCells.forEach(cell => draftCells[cell.id].state = CellState.Xed)\n      // Light all cells that are now lit by lightbulbs\n      const lightbulbCells = draftCells.filter(cell => cell.state === CellState.Lightbulb)\n      const litCells = lightbulbCells.flatMap(cell => shineLight(draftCells, cell))\n      litCells.forEach((cell) => {\n        if ([CellState.Xed, CellState.LitXed].includes(cell.state)) {\n          draftCells[cell.id].state = CellState.LitXed\n        } else {\n          draftCells[cell.id].state = CellState.Lit\n        }\n      })\n      // Check for errors\n      draftCells.forEach(cell => {\n        draftCells[cell.id].isError = cellIsError(draftCells, cell)\n      })\n\n      // Check for win condition\n      setIsGameWon(checkIsGameWon(draftCells))\n    })\n\n  }\n\n  return (\n    <>\n      <div className='board_grid'>\n        {cells.map((cell) => (\n          <button\n            disabled={!cellIsClickable(cell)}\n            className={\"cell \" + (cell.isError ? \"cell_error\" : \"\")}\n            onClick={() => handleClick(cell)}\n            key={cell.id}>{cellStateToContent[cell.state]}</button>\n        ))}\n      </div>\n      {isGameWon && <Text>You won!</Text>}\n    </>\n  )\n}\n","import { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, Text, View } from 'react-native';\nimport './styles.css'\nimport GameBoard from './GameBoard';\n\nexport default function App() {\n  return (\n    <>\n      <View style={main_style.container}>\n        <Text>üí°Light Upüí°</Text>\n        <StatusBar style=\"auto\" />\n        <GameBoard />\n      </View>\n    </>\n  );\n}\n\nconst main_style = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [137], () => (__webpack_require__(9866)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["nrows","ncols","itorc","i","Math","floor","rctoi","r","c","CellState","cellStateToContent","_cellStateToContent","_defineProperty","Empty","Shaded","Shaded0","Shaded1","Shaded2","Shaded3","Shaded4","Xed","Lightbulb","Lit","LitXed","charToCellState","puzzle1","transparentStates","getNumAdjacentLightbulbsDiff","cells","cell","adjacentCells","_itorc3","id","_itorc4","_slicedToArray","push","getAdjacentCells","numAdjacentLightbulbs","filter","state","length","GameBoard","_useImmer","useImmer","puzzle","lines","trim","split","y","line","x","char","parsePuzzle","_useImmer2","setCells","_useImmer3","_useImmer4","isGameWon","setIsGameWon","cellIsClickable","includes","handleClick","clickedCell","draftCells","newState","forEach","litCells","flatMap","lightbulbCell","_itorc","_itorc2","shineLight","isError","cellIsError","disallowedStates","map","some","diff","checkIsGameWon","_jsxs","_Fragment","children","_jsx","className","disabled","onClick","Text","App","View","style","main_style","container","StatusBar","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}